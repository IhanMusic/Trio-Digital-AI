import { BriefData } from '../../types/brief';

/**
 * LEGACY FILE - Partiellement utilisÃ©
 * generateCreativeBriefs: Deprecated - RemplacÃ© par PostGenerationService
 * generateVisualAnalysis: ACTIF - UtilisÃ© par services/ai/index.ts
 */

interface ThemeData {
  name: string;
  objective: string;
  approach: string;
  emotions: string;
  formats: string[];
  networks: string[];
}

/**
 * DEPRECATED - Kept for backward compatibility only
 * Use PostGenerationService for new implementations
 */
export const generateCreativeBriefs = (
  briefData: BriefData, 
  themes: ThemeData[], 
  startIndex: number = 0, 
  batchSize: number = 4
): string => {
  return `LEGACY CREATIVE BRIEFS GENERATOR - DEPRECATED
  
This function is deprecated and kept for compatibility only.
Creative briefs are now generated by PostGenerationService using the new 3-level architecture.

Brand: ${briefData.companyName}
Sector: ${briefData.sector}
`;
};

/**
 * ACTIVE FUNCTION - Analyse visuelle de la marque
 * AdaptÃ© Ã  la nouvelle architecture 3 niveaux (Brand only)
 * Note: Informations Product et Calendar seront ajoutÃ©es par les services
 */
export const generateVisualAnalysis = (briefData: BriefData): string => {
  // Construction contexte historique
  const historySection = briefData.previousCampaigns && briefData.previousCampaigns.length > 0 ? `
HISTORIQUE VISUEL DES CAMPAGNES:
${briefData.previousCampaigns.map(campaign => `
${campaign.name} (${campaign.period}):
- RÃ©sultats visuels: ${campaign.results.join(', ')}
- Learnings crÃ©atifs: ${campaign.learnings.join(', ')}`).join('\n')}
` : '';

  // Construction analyse concurrentielle
  const competitiveSection = briefData.competitiveAnalysis ? `
ANALYSE CONCURRENTIELLE VISUELLE:
${briefData.competitiveAnalysis.directCompetitors?.map(competitor => `
${competitor.name}:
- Signatures visuelles: ${competitor.strengths.join(', ')}
- StratÃ©gies crÃ©atives: ${competitor.strategies.join(', ')}`).join('\n') || 'Aucun concurrent direct analysÃ©'}

Position diffÃ©renciante: ${briefData.competitiveAnalysis.marketPosition || 'Non dÃ©finie'}
OpportunitÃ©s crÃ©atives: ${briefData.competitiveAnalysis.opportunities?.join(', ') || 'Ã€ identifier'}
` : '';

  // Construction cadre lÃ©gal
  const legalSection = briefData.legalConstraints ? `
CONTRAINTES LÃ‰GALES VISUELLES:
RÃ©glementations: ${briefData.legalConstraints.regulations.join(', ')}
Compliance: ${briefData.legalConstraints.compliance.join(', ')}
Mentions obligatoires: ${briefData.legalConstraints.disclaimers.join(', ')}
` : '';

  return `
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                        â•‘
â•‘          ANALYSE VISUELLE MARQUE - STANDARD CANNES LIONS              â•‘
â•‘          OptimisÃ© pour IA GÃ©nÃ©rative (Stability AI, Midjourney)       â•‘
â•‘                                                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

En tant que directeur artistique primÃ© aux Cannes Lions et expert en IA gÃ©nÃ©rative, 
analysez les Ã©lÃ©ments visuels de la marque et gÃ©nÃ©rez des recommandations 
dÃ©taillÃ©es optimisÃ©es pour la gÃ©nÃ©ration d'images par IA.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
IDENTITÃ‰ DE MARQUE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

INFORMATIONS CORPORATE:
Marque: ${briefData.companyName}
Secteur: ${briefData.sector}
Positionnement stratÃ©gique: ${briefData.businessType || 'Non spÃ©cifiÃ©'} / ${briefData.companyStage || 'Non spÃ©cifiÃ©'} / ${briefData.pricePositioning || 'Non spÃ©cifiÃ©'}

DESCRIPTION & ADN:
${briefData.companyDescription}

${briefData.values ? `VALEURS DE MARQUE:
${briefData.values.map(v => `â€¢ ${v}`).join('\n')}
` : ''}

${briefData.mission ? `MISSION:
${briefData.mission}
` : ''}

PALETTE DE MARQUE:
${briefData.colors ? `
â€¢ Couleur principale: ${briefData.colors.primary || 'Non dÃ©finie'} ${briefData.colors.primary ? `(HEX: ${briefData.colors.primary})` : ''}
â€¢ Couleur secondaire: ${briefData.colors.secondary || 'Non dÃ©finie'} ${briefData.colors.secondary ? `(HEX: ${briefData.colors.secondary})` : ''}
â€¢ Couleur accent: ${briefData.colors.accent || 'Non dÃ©finie'} ${briefData.colors.accent ? `(HEX: ${briefData.colors.accent})` : ''}
` : 'Palette de marque non dÃ©finie - Ã€ dÃ©velopper dans l\'analyse'}

${historySection}

${competitiveSection}

${legalSection}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
MISSION D'ANALYSE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Sur la base de ces informations de MARQUE, dÃ©veloppez une analyse visuelle 
complÃ¨te et des recommandations crÃ©atives pour alimenter la gÃ©nÃ©ration de 
contenu visuel par IA gÃ©nÃ©rative.

NOTE: Cette analyse se concentre sur l'ADN MARQUE. Les informations PRODUIT 
(photos, caractÃ©ristiques) et CALENDRIER (rÃ©seaux sociaux, formats) seront 
intÃ©grÃ©es ultÃ©rieurement par les services appropriÃ©s.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FRAMEWORK D'ANALYSE ATTENDU
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£ IDENTITÃ‰ VISUELLE STRATÃ‰GIQUE

A. PALETTE COULEURS Ã‰TENDUE (Codes HEX prÃ©cis)
   â†’ Palette principale harmonisÃ©e (3-5 couleurs)
   â†’ Palette secondaire complÃ©mentaire (3-4 couleurs)
   â†’ Couleurs d'accent stratÃ©giques (2-3 couleurs)
   â†’ Proportions recommandÃ©es (%)
   â†’ Associations Ã©motionnelles par couleur
   â†’ Gradients de marque signature
   â†’ ConformitÃ© avec cadre lÃ©gal sectoriel

B. TYPOGRAPHIE & HIÃ‰RARCHIE VISUELLE
   â†’ Familles de polices principales (avec alternatives IA)
   â†’ Polices secondaires et d'accent
   â†’ HiÃ©rarchie typographique (H1, H2, body, captions)
   â†’ Tailles et espacements optimaux
   â†’ Styles de caractÃ¨res (bold, italic, regular)
   â†’ LisibilitÃ© mentions lÃ©gales (taille min, contraste)
   â†’ Guidelines pour textes gÃ©nÃ©rÃ©s par IA

C. SYSTÃˆME ICONOGRAPHIQUE
   â†’ Style d'iconographie (flat, outline, gradient, 3D)
   â†’ Ã‰paisseur traits et niveau de dÃ©tail
   â†’ Angles, courbes, coins (arrondis vs sharp)
   â†’ CohÃ©rence visuelle cross-canal
   â†’ Symboles rÃ©glementaires obligatoires
   â†’ Prompts IA pour gÃ©nÃ©rer icÃ´nes cohÃ©rentes

2ï¸âƒ£ DIRECTION PHOTOGRAPHIQUE & COMPOSITION

A. STYLE PHOTOGRAPHIQUE SIGNATURE
   â†’ Genre photographique (lifestyle, studio, documentary, conceptual)
   â†’ Niveau de stylisation (naturel, stylisÃ©, surrÃ©aliste)
   â†’ Traitement des textures (smooth, grainy, sharp)
   â†’ Profondeur de champ prÃ©fÃ©rÃ©e
   â†’ Bokeh et flou artistique
   â†’ Post-processing signature

B. COMPOSITION & CADRAGE
   â†’ RÃ¨gles de composition (tiers, golden ratio, centrÃ©)
   â†’ Points d'intÃ©rÃªt et focales
   â†’ Lignes de force et perspectives
   â†’ Ã‰quilibre des masses visuelles
   â†’ Espaces nÃ©gatifs stratÃ©giques
   â†’ Zones rÃ©servÃ©es mentions lÃ©gales (safe zones)

C. Ã‰CLAIRAGE & ATMOSPHÃˆRE
   â†’ Style d'Ã©clairage (naturel, studio, dramatique, soft)
   â†’ Direction lumiÃ¨re principale (front, side, back, top)
   â†’ Contraste et dynamique
   â†’ TempÃ©rature couleur (warm, neutral, cool)
   â†’ Mood et ambiance cible
   â†’ Effets lumineux signature

3ï¸âƒ£ TERRITOIRES VISUELS DE MARQUE

A. UNIVERS ESTHÃ‰TIQUES (min. 3 territoires)
   â†’ DÃ©finir 3-5 univers visuels cohÃ©rents avec ADN marque
   â†’ Pour chaque univers:
     * Moodboard keywords
     * RÃ©fÃ©rences artistiques/culturelles
     * Palette dominante
     * Style photographique
     * Contextes d'usage

B. Ã‰LÃ‰MENTS RÃ‰CURRENTS DE MARQUE
   â†’ Patterns et textures signature
   â†’ Formes et gÃ©omÃ©tries caractÃ©ristiques
   â†’ Effets visuels distinctifs
   â†’ Signatures graphiques
   â†’ Brand assets intÃ©grables

C. Ã‰VOLUTIONS CRÃ‰ATIVES RECOMMANDÃ‰ES
   â†’ Tendances Ã©mergentes alignÃ©es avec marque
   â†’ Innovations visuelles secteur
   â†’ ExpÃ©rimentations conseillÃ©es
   â†’ Risks crÃ©atifs calculÃ©s

4ï¸âƒ£ PROMPTS OPTIMISÃ‰S IA GÃ‰NÃ‰RATIVE

A. MASTER PROMPTS PAR STYLE (min. 5 prompts)
   â†’ Prompt base identitÃ© marque
   â†’ Variations par univers visuel
   â†’ Negative prompts essentiels
   â†’ ParamÃ¨tres techniques (CFG, steps, sampler)
   â†’ Keywords magiques pour cohÃ©rence

B. PROMPTS SPÃ‰CIFIQUES PAR CONTEXTE
   â†’ Hero visuals / Key visuals
   â†’ Contenu social media
   â†’ Assets promotionnels
   â†’ Backgrounds / Textures
   â†’ Product integration contexts

C. GUIDELINES GÃ‰NÃ‰RATION IA
   â†’ ModÃ¨les IA recommandÃ©s (Stable Diffusion, Midjourney, DALL-E)
   â†’ Settings optimaux par use case
   â†’ Techniques de consistency (seeds, img2img, ControlNet)
   â†’ Post-processing nÃ©cessaire
   â†’ Quality control checklist

5ï¸âƒ£ CONFORMITÃ‰ & VALIDATION

A. CHECK-LIST RÃ‰GLEMENTAIRE VISUELLE
   â†’ Symboles obligatoires et placement
   â†’ Taille minimale mentions lÃ©gales
   â†’ Contraste requis pour lisibilitÃ©
   â†’ Zones interdites (produits tabac, alcool si applicable)
   â†’ Warnings visuels sectoriels

B. PROCESS DE VALIDATION
   â†’ Ã‰tapes d'approbation crÃ©ative
   â†’ Points de contrÃ´le lÃ©gal
   â†’ Documentation requise
   â†’ Archivage des assets

C. ADAPTATIONS CROSS-CANAL
   â†’ DÃ©clinaisons par format (square, portrait, landscape, stories)
   â†’ Optimisations par plateforme
   â†’ Responsive guidelines
   â†’ AccessibilitÃ© (WCAG AA minimum)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
VALIDATION QUALITÃ‰ CANNES LIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Chaque recommandation doit Ãªtre:

âœ“ INSIGHT-DRIVEN
  â†’ BasÃ©e sur ADN marque, positionnement, historique
  â†’ DiffÃ©renciante vs. concurrence analysÃ©e
  
âœ“ TECHNIQUEMENT PRÃ‰CISE
  â†’ Valeurs numÃ©riques exactes (HEX, tailles, ratios)
  â†’ ParamÃ¨tres IA reproductibles
  â†’ Guidelines claires et actionnables
  
âœ“ CRÃ‰ATIVEMENT AMBITIEUSE
  â†’ Viser excellence Cannes Lions
  â†’ Innovation vs. codes secteur
  â†’ MÃ©morable et distinctive
  
âœ“ LÃ‰GALEMENT CONFORME
  â†’ Respect total cadre rÃ©glementaire
  â†’ Mentions intÃ©grÃ©es crÃ©ativement
  â†’ Risk mitigation
  
âœ“ SCALABLE & COHÃ‰RENTE
  â†’ SystÃ¨me visuel Ã©volutif
  â†’ CohÃ©rence cross-canal garantie
  â†’ Efficace pour gÃ©nÃ©ration IA en volume

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FORMAT DE RÃ‰PONSE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â€¢ Structurer avec numÃ©rotation claire (1.A.1, 1.A.2, etc.)
â€¢ Fournir valeurs numÃ©riques prÃ©cises (codes HEX, px, %, degrÃ©s)
â€¢ Inclure prompts IA copy-pastables
â€¢ Justifier chaque choix par insights marque/marchÃ©
â€¢ IntÃ©grer systÃ©matiquement dimension lÃ©gale
â€¢ Penser en termes de gÃ©nÃ©ration automatisÃ©e par IA
â€¢ Viser cohÃ©rence visuelle Ã  grande Ã©chelle

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

READY TO BUILD A CANNES LIONS VISUAL IDENTITY ğŸ¦ğŸ¨âœ¨
`;
};
