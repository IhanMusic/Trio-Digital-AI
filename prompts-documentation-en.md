# Prompts Documentation - Trio Digital

## Overview

The application uses two main services to generate all content displayed in Results.tsx:

### 1. PostGenerationService.ts
- Handles text content generation with GPT-4
- Coordinates post scheduling
- Manages platform-specific parameters
- Integrates language and country constraints
- Triggers image generation

### 2. ImageGenerationService.ts
- Handles image generation with Stability AI Ultra
- Configures formats according to platform
- Optimizes generated images
- Manages image storage

The complete process flows as follows:

### Data Flow

1. **Initialization**
   - User configures a publication calendar
   - Defines brand and content parameters
   - Chooses platforms and frequency

2. **Content Generation (PostGenerationService.ts)**
   - Calculates required posts per platform
   - Generates optimal publication dates
   - Sends prompts to GPT-4 for text content
   - Receives and parses responses (text + image prompts)

3. **Image Generation (ImageGenerationService.ts)**
   - Receives image prompts from PostGenerationService
   - Configures format according to platform
   - Generates images via Stability AI Ultra
   - Optimizes and stores images

4. **Storage and Display**
   - Posts are saved in the database
   - Results.tsx retrieves and displays posts
   - Enables content validation and editing
   - Handles image downloads

## GPT-4 Prompts Structure

### System Prompt (Role: system)

```
You are a digital marketing expert specialized in [PLATFORM].
Generate [NUMBER] publications adapted to the platform's specificities.

Publication languages: [LANGUAGES]

Language-specific instructions:
[DIALECT_SPECIFIC_INSTRUCTIONS]

Platform specificities:
- Facebook: engaging text, moderate emojis, clear call-to-action
- Instagram: concise text, frequent emojis, relevant hashtags
- Twitter: short and impactful messages, limited hashtags
- LinkedIn: professional tone, business content, no emojis
- TikTok: casual tone, trending hashtags

For each publication, follow this exact format:
---POST #[number]---
[Post content here]
---IMAGE PROMPT #[number]---
[English prompt describing the image to generate, no emojis or hashtags]

IMPORTANT: Each publication must be completely different from others.
```

### User Prompt (Role: user)

```
Create [NUMBER] unique [PLATFORM] publications for:
- Brand: [BRAND_NAME] ([SECTOR])
- Description: [COMPANY_DESCRIPTION]
- Style: [COMMUNICATION_STYLE]
- Target: [TARGET_COUNTRY] (Languages: [TARGET_LANGUAGES])
- Objectives: [SOCIAL_MEDIA_GOALS]
- Period: from [START_DATE] to [END_DATE]
```

## Expected Response Format

GPT-4's response must follow this strict format:

```
---POST #1---
[First post content]
---IMAGE PROMPT #1---
[English image generation prompt]

---POST #2---
[Second post content]
---IMAGE PROMPT #2---
[English image generation prompt]

[etc...]
```

## GPT-4 Configuration Parameters

- Model: gpt-4-0613
- Temperature: 0.9 (favors creativity)
- Maximum tokens: 4000

## Platform Specificities

### Facebook
- Style: Engaging text
- Emojis: Moderate use
- Focus: Clear call-to-action
- Image format: 16:9

### Instagram
- Style: Concise text
- Emojis: Frequent use
- Hashtags: Numerous and relevant
- Image format: 1:1 (square)

### Twitter
- Style: Short and impactful messages
- Hashtags: Limited
- Image format: 16:9

### LinkedIn
- Style: Professional tone
- Content: Business-oriented
- Emojis: Avoided
- Image format: 16:9

### TikTok
- Style: Casual tone
- Hashtags: Trending and viral
- Image format: 16:9

## Language Processing

- Multilingual support with dialect management
- Specific instructions for each dialect
- Tone adaptation according to language and target market

## Image Generation

### Stability AI Ultra Configuration

The application uses the Stability AI Ultra API with the following parameters:

- **API Endpoint**: `https://api.stability.ai/v2beta/stable-image/generate/ultra`
- **Output format**: PNG
- **Maximum dimensions**: 1024x1024 pixels
- **Quality**: 100%

### Generation Prompts

Image generation prompts are:
- Automatically generated by GPT-4
- Always in English
- Without emojis or hashtags
- Adapted to platform format (aspect ratio)
- Optimized for Stability AI Ultra

### Generation Options

Image generation supports different configurations based on usage:

1. **Purpose**
   - social: For social networks
   - product: For product photos
   - lifestyle: For lifestyle images

2. **Aspect Ratio**
   - 1:1: Square format (Instagram)
   - 16:9: Landscape format (other networks)

### Generation Process

1. GPT-4 generates detailed prompt in English
2. Prompt is sent to Stability AI Ultra
3. Generated image is:
   - Saved in PNG format
   - Resized if necessary (max 1024x1024)
   - Optimized for web
   - Stored in public/images folder

### Best Practices for Image Prompts

1. **Prompt Structure**
   - Clear and detailed scene description
   - Visual style specification
   - Ambiance and lighting indication
   - Key elements mention

2. **Elements to Avoid**
   - Text in image
   - Logos or trademarks
   - Close-up faces
   - Unnatural poses
   - Anatomical deformations

## Validation and Control

Generated posts go through a validation process:
1. Initial status: 'pending_validation'
2. Validation options: 'approved' or 'rejected'
3. Possibility to edit text after generation
4. Modification history tracking

## Variants Used in Generation

### 1. Brand Brief Data

The following information from BriefForm.tsx is used in PostGenerationService.ts:

1. **Basic Information**
   - Company name (companyName)
   - Industry sector (sector)
   - Company description (description)

2. **Style and Communication**
   - Communication tone (communicationStyle)
   - Current social networks (socialMediaAccounts)
   - Communication objectives (values/socialMediaGoals)

3. **Target Audience**
   - Target audience (targetAudience)

### 2. Editorial Calendar Data

The following parameters from Calendars.tsx are used in generation:

1. **Temporal Configuration**
   - Publication period (startDate, endDate)
   - Publication frequency (frequency)
     * daily: 1 post/day
     * twice_daily: 2 posts/day
     * three_per_week: 3 posts/week
     * weekly: 1 post/week

2. **Linguistic Configuration**
   - Target country (targetCountry)
   - Publication languages (targetLanguages)

3. **Publication Plan**
   - Frequency per platform (contentPlan.frequency)
   - Preferred times (contentPlan.preferredTimes)

### Impact on Generation

These variants are used to:
1. Personalize content according to brand identity
2. Adapt tone and style according to platform
3. Manage publication frequency and timing
4. Ensure linguistic and cultural adaptation

## Unused Variants

### 1. Brand Brief (BriefForm.tsx)

The following fields are collected but not yet used in generation:

1. **Visual Resources**
   - Logo (logo)
   - Brand guidelines (brandGuidelines)
   - Product photos (productPhotos)

2. **Competitive Analysis**
   - Direct competitors (competitors)
   - Competitive strategies (competitorStrategies)
   - Market position (marketPosition)
   - Differentiators (differentiators)

3. **Metrics and ROI**
   - Success metrics (successMetrics)
   - ROI expectations (roiExpectations)

4. **Budget and Resources**
   - Total budget (budget.totalBudget)
   - Budget allocation (budget.allocation)
   - Internal team (resources.internalTeam)
   - External partners (resources.externalPartners)
   - Available tools (resources.tools)

5. **Legal Constraints**
   - Regulations (legalConstraints.regulations)
   - Compliance (legalConstraints.compliance)
   - Required disclaimers (legalConstraints.disclaimers)

### 2. Editorial Calendar (Calendars.tsx)

The following parameters are available but unused:

1. **Content Mix**
   - Content types (contentPlan.contentMix)
   - Percentages per type

2. **Generation Parameters**
   - Themes (generationSettings.themes)
   - Keywords (generationSettings.keywords)
   - Content length (generationSettings.contentLength)
   - Image style (generationSettings.imageStyle)

### Improvement Potential

These unused variants offer improvement opportunities for:
1. More advanced content personalization
2. Better integration of legal constraints
3. Metric-based optimization
4. Content adaptation based on budget and resources
5. More targeted image generation using brand visual resources

## Best Practices

1. **Brand Consistency**
   - Respect tone and communication style
   - Maintain consistent visual identity
   - Adapt content to brand values

2. **Platform Optimization**
   - Respect each social network's specificities
   - Adapt image formats
   - Use platform-specific features

3. **Content Quality**
   - Vary content types
   - Avoid repetition
   - Maintain text/image balance

4. **Planning**
   - Respect optimal time slots
   - Maintain regular frequency
   - Adapt scheduling to time zones
